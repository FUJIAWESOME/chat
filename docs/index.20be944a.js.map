{"mappings":"IIII,E,S,E,C,C,C,C,C,C,C,E,O,c,C,E,E,C,I,E,I,E,W,C,E,a,C,C,E,C,S,E,C,E,O,G,E,U,C,E,O,C,C,C,I,E,W,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,I,E,E,Q,C,E,Q,S,C,C,C,EHMD,EAAA,OAAA,CAP8D,EAAA,OAAA,CAAiB,AAOxE,WAER,yBAAyB,EACzB,SAAS,EAAQ,CAAM,EACrB,IAAK,IAAI,EAAI,EAAG,EAAI,UAAU,MAAM,CAAE,IAAK,CACzC,IAAI,EAAS,SAAS,CAAC,EAAE,CACzB,IAAK,IAAI,KAAO,EACd,CAAM,CAAC,EAAI,CAAG,CAAM,CAAC,EAAI,AAE7B,CACA,OAAO,CACT,CAyHA,wBAAwB,EAExB,OAHU,AAtGV,wBAAwB,EAExB,yBAAyB,EAEzB,SAAS,EAAM,CAAS,CAAE,CAAiB,EACzC,SAAS,EAAK,CAAI,CAAE,CAAK,CAAE,CAAU,EACnC,GAAI,AAAoB,aAApB,OAAO,UAMuB,UAA9B,MAAO,AAFX,CAAA,EAAa,EAAO,CAAC,EAAG,EAAmB,EAA3C,EAEsB,OAAO,EAC3B,CAAA,EAAW,OAAO,CAAG,IAAI,KAAK,KAAK,GAAG,GAAK,AAAqB,MAArB,EAAW,OAAO,CAD/D,EAGI,EAAW,OAAO,EACpB,CAAA,EAAW,OAAO,CAAG,EAAW,OAAO,CAAC,WAAW,EADrD,EAIA,EAAO,mBAAmB,GACvB,OAAO,CAAC,uBAAwB,oBAChC,OAAO,CAAC,QAAS,QAEpB,IAAI,EAAwB,GAC5B,IAAK,IAAI,KAAiB,EACnB,CAAU,CAAC,EAAc,GAI9B,GAAyB,KAAO,EAEE,CAAA,IAA9B,CAAU,CAAC,EAAc,EAI7B,kCAAkC;AAClC,MAAM;AACN,iEAAiE;AACjE,iBAAiB;AACjB,2DAA2D;AAC3D,iDAAiD;AACjD,MAAM;AACN,C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","sources":["<anon>","node_modules/js-cookie/dist/js.cookie.js","js/constants.js","js/view.js","js/main.js"],"sourcesContent":["\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire25d8\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire25d8\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"8Nbse\", function(module, exports) {\n(function(global, factory) {\n    module.exports = factory();\n})(module.exports, function() {\n    \"use strict\";\n    /* eslint-disable no-var */ function assign(target) {\n        for(var i = 1; i < arguments.length; i++){\n            var source = arguments[i];\n            for(var key in source)target[key] = source[key];\n        }\n        return target;\n    }\n    /* eslint-enable no-var */ /* eslint-disable no-var */ var defaultConverter = {\n        read: function(value) {\n            if (value[0] === '\"') value = value.slice(1, -1);\n            return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent);\n        },\n        write: function(value) {\n            return encodeURIComponent(value).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g, decodeURIComponent);\n        }\n    };\n    /* eslint-enable no-var */ /* eslint-disable no-var */ function init(converter, defaultAttributes) {\n        function set(name, value, attributes) {\n            if (typeof document === \"undefined\") return;\n            attributes = assign({}, defaultAttributes, attributes);\n            if (typeof attributes.expires === \"number\") attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n            if (attributes.expires) attributes.expires = attributes.expires.toUTCString();\n            name = encodeURIComponent(name).replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent).replace(/[()]/g, escape);\n            var stringifiedAttributes = \"\";\n            for(var attributeName in attributes){\n                if (!attributes[attributeName]) continue;\n                stringifiedAttributes += \"; \" + attributeName;\n                if (attributes[attributeName] === true) continue;\n                // Considers RFC 6265 section 5.2:\n                // ...\n                // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n                //     character:\n                // Consume the characters of the unparsed-attributes up to,\n                // not including, the first %x3B (\";\") character.\n                // ...\n                stringifiedAttributes += \"=\" + attributes[attributeName].split(\";\")[0];\n            }\n            return document.cookie = name + \"=\" + converter.write(value, name) + stringifiedAttributes;\n        }\n        function get(name) {\n            if (typeof document === \"undefined\" || arguments.length && !name) return;\n            // To prevent the for loop in the first place assign an empty array\n            // in case there are no cookies at all.\n            var cookies = document.cookie ? document.cookie.split(\"; \") : [];\n            var jar = {};\n            for(var i = 0; i < cookies.length; i++){\n                var parts = cookies[i].split(\"=\");\n                var value = parts.slice(1).join(\"=\");\n                try {\n                    var found = decodeURIComponent(parts[0]);\n                    jar[found] = converter.read(value, found);\n                    if (name === found) break;\n                } catch (e) {}\n            }\n            return name ? jar[name] : jar;\n        }\n        return Object.create({\n            set: set,\n            get: get,\n            remove: function(name, attributes) {\n                set(name, \"\", assign({}, attributes, {\n                    expires: -1\n                }));\n            },\n            withAttributes: function(attributes) {\n                return init(this.converter, assign({}, this.attributes, attributes));\n            },\n            withConverter: function(converter) {\n                return init(assign({}, this.converter, converter), this.attributes);\n            }\n        }, {\n            attributes: {\n                value: Object.freeze(defaultAttributes)\n            },\n            converter: {\n                value: Object.freeze(converter)\n            }\n        });\n    }\n    var api = init(defaultConverter, {\n        path: \"/\"\n    });\n    /* eslint-enable no-var */ return api;\n});\n\n});\n\nparcelRegister(\"s9t2A\", function(module, exports) {\n\n$parcel$export(module.exports, \"UI_ELEMENTS\", () => $0549f5aaef62b2d2$export$6b8c0dabfa626b4f);\n$parcel$export(module.exports, \"URL\", () => $0549f5aaef62b2d2$export$61abde59b50deb8e);\n$parcel$export(module.exports, \"HTTP\", () => $0549f5aaef62b2d2$export$ee9d07cf1658f1a7);\n$parcel$export(module.exports, \"WS_READY_STATE\", () => $0549f5aaef62b2d2$export$2c1bf60c22d7bfeb);\nconst $0549f5aaef62b2d2$export$6b8c0dabfa626b4f = {\n    FORM: {\n        AUTHORIZATION: document.querySelector(\".authorization__form\"),\n        SETTINGS: document.querySelector(\".settings__form\"),\n        ACCEPT: document.querySelector(\".accept__form\"),\n        INPUT_MESSAGE: document.querySelector(\".dialog__bottom\")\n    },\n    MODAL_WINDOW: {\n        AUTHORIZATION: document.querySelector(\".authorization\"),\n        SETTINGS: document.querySelector(\".settings\"),\n        ACCEPT: document.querySelector(\".accept\")\n    },\n    BUTTON: {\n        AUTHORIZATION_TOKEN_BTN: document.querySelector(\".authorization__token-btn\"),\n        ACCEPT_CLOSE: document.querySelector(\".accept__close\"),\n        SETTINGS_CLOSE: document.querySelector(\".settings__close\"),\n        SETTINGS: document.querySelector(\".dialog__btn-settings\"),\n        EXIT: document.querySelector(\".dialog__btn-exit\")\n    },\n    BACKGROUND_MODAL_WINDOW: document.querySelector(\".background-modal_window\"),\n    TEMPLATE: document.getElementById(\"message_submit\"),\n    MESSAGE_LIST: document.querySelector(\".dialog__message-list\")\n};\nconst $0549f5aaef62b2d2$export$61abde59b50deb8e = {\n    API: {\n        MESSAGES: \"https://edu.strada.one/api/messages\",\n        USER: \"https://edu.strada.one/api/user\",\n        USER_ME: \"https://edu.strada.one/api/user/me\"\n    },\n    WEB_SOCKET: \"ws://edu.strada.one/websockets?\"\n};\nconst $0549f5aaef62b2d2$export$ee9d07cf1658f1a7 = {\n    STATUS: {\n        BAD_REQUEST: 400,\n        UNAUTHORIZED: 401\n    }\n};\nconst $0549f5aaef62b2d2$export$2c1bf60c22d7bfeb = {\n    OPEN: 1,\n    CLOSED: 3\n};\n\n});\n\n\nvar $8Nbse = parcelRequire(\"8Nbse\");\n\nvar $s9t2A = parcelRequire(\"s9t2A\");\n\nvar $8Nbse = parcelRequire(\"8Nbse\");\n\nvar $s9t2A = parcelRequire(\"s9t2A\");\n\nlet $77ac944da51b7354$var$socket;\nasync function $77ac944da51b7354$export$d5a1e65f8aa21b51(url, method, body, headers) {\n    const options = {\n        method: method,\n        headers: headers\n    };\n    try {\n        const isNotEmptyBody = Object.keys(body).length;\n        if (isNotEmptyBody) options.body = JSON.stringify(body);\n    } catch (error) {\n        console.log(error);\n    }\n    return await fetch(url, options);\n}\nfunction $77ac944da51b7354$export$ecce8d0c2c733c65(name) {\n    const token = (0, (/*@__PURE__*/$parcel$interopDefault($8Nbse))).get(\"token\");\n    const headers = {\n        \"Authorization\": `Bearer ${token}`,\n        \"Content-Type\": \"application/json\"\n    };\n    return $77ac944da51b7354$export$d5a1e65f8aa21b51((0, $s9t2A.URL).API.USER, \"PATCH\", {\n        name: name\n    }, headers);\n}\nfunction $77ac944da51b7354$export$1cea2e25b75a88f2(email) {\n    const headers = {\n        \"Content-Type\": \"application/json\"\n    };\n    return $77ac944da51b7354$export$d5a1e65f8aa21b51((0, $s9t2A.URL).API.USER, \"POST\", {\n        email: email\n    }, headers);\n}\nfunction $77ac944da51b7354$export$53316ac66ddeb6d6() {\n    const token = (0, (/*@__PURE__*/$parcel$interopDefault($8Nbse))).get(\"token\");\n    const headers = {\n        \"Authorization\": `Bearer ${token}`,\n        \"Content-Type\": \"application/json\"\n    };\n    return $77ac944da51b7354$export$d5a1e65f8aa21b51((0, $s9t2A.URL).API.USER_ME, \"GET\", {}, headers);\n}\nfunction $77ac944da51b7354$export$24d2e7dc410ce2e5(token) {\n    const headers = {\n        \"Authorization\": `Bearer ${token}`,\n        \"Content-Type\": \"application/json\"\n    };\n    return $77ac944da51b7354$export$d5a1e65f8aa21b51((0, $s9t2A.URL).API.MESSAGES, \"GET\", {}, headers);\n}\nfunction $77ac944da51b7354$export$43ad8e7eb817f344() {\n    $77ac944da51b7354$var$socket.onmessage = function(event) {\n        try {\n            const data = JSON.parse(event.data);\n            const dateNow = new Date(data.createdAt);\n            const email = localStorage.getItem(\"email\");\n            if (data.user.email === email) (0, $c23a8642c134aff9$export$e7d1575c30960620)(data.user.name, data.text, dateNow, true, true);\n            else (0, $c23a8642c134aff9$export$e7d1575c30960620)(data.user.name, data.text, dateNow, false, true);\n        } catch (error) {\n            console.log(error);\n        }\n    };\n}\nfunction $77ac944da51b7354$export$d98806af32876cc6() {\n    try {\n        const token = (0, (/*@__PURE__*/$parcel$interopDefault($8Nbse))).get(\"token\");\n        const isSocketOpen = $77ac944da51b7354$var$socket?.readyState === (0, $s9t2A.WS_READY_STATE).OPEN;\n        const isSocketClose = $77ac944da51b7354$var$socket?.readyState === (0, $s9t2A.WS_READY_STATE).CLOSED || !$77ac944da51b7354$var$socket;\n        if (isSocketOpen) {\n            $77ac944da51b7354$var$socket.close();\n            $77ac944da51b7354$var$socket = new WebSocket((0, $s9t2A.URL).WEB_SOCKET + token);\n            $77ac944da51b7354$export$43ad8e7eb817f344();\n        } else if (isSocketClose) {\n            $77ac944da51b7354$var$socket = new WebSocket((0, $s9t2A.URL).WEB_SOCKET + token);\n            $77ac944da51b7354$export$43ad8e7eb817f344();\n        }\n    } catch (error) {\n        console.log(error);\n    }\n}\nfunction $77ac944da51b7354$export$465cb47180de50f0(message) {\n    try {\n        if ($77ac944da51b7354$var$socket?.readyState === 1) $77ac944da51b7354$var$socket.send(JSON.stringify({\n            text: `${message}`\n        }));\n    } catch (error) {\n        console.log(error);\n    }\n}\n\n\ndocument.addEventListener(\"DOMContentLoaded\", async ()=>{\n    localStorage.setItem(\"numberUploadedMessages\", 0);\n    const token = (0, (/*@__PURE__*/$parcel$interopDefault($8Nbse))).get(\"token\");\n    if (token) {\n        const response = await (0, $77ac944da51b7354$export$24d2e7dc410ce2e5)(token);\n        const data = await response.json();\n        try {\n            localStorage.setItem(\"messages\", JSON.stringify(data));\n        } catch (error) {\n            console.log(error);\n        }\n        $c23a8642c134aff9$var$uploadMessageHistory();\n        (0, $77ac944da51b7354$export$d98806af32876cc6)();\n    } else {\n        (0, $s9t2A.UI_ELEMENTS).MODAL_WINDOW.AUTHORIZATION.classList.add(\"open\");\n        (0, $s9t2A.UI_ELEMENTS).BACKGROUND_MODAL_WINDOW.style.display = \"block\";\n    }\n});\n(0, $s9t2A.UI_ELEMENTS).MESSAGE_LIST.addEventListener(\"scroll\", (event)=>{\n    const containerHeight = event.currentTarget.clientHeight;\n    const scrollHeight = event.currentTarget.scrollHeight;\n    const scrollTop = event.currentTarget.scrollTop;\n    const isTopOfScroll = containerHeight + Math.abs(scrollTop) + 1 >= scrollHeight;\n    if (isTopOfScroll) $c23a8642c134aff9$var$uploadMessageHistory();\n});\n(0, $s9t2A.UI_ELEMENTS).BUTTON.SETTINGS.addEventListener(\"click\", async ()=>{\n    (0, $s9t2A.UI_ELEMENTS).MODAL_WINDOW.SETTINGS.classList.add(\"open\");\n    (0, $s9t2A.UI_ELEMENTS).BACKGROUND_MODAL_WINDOW.style.display = \"block\";\n    (0, $s9t2A.UI_ELEMENTS).FORM.SETTINGS.firstElementChild.value = localStorage.getItem(\"name\");\n});\n(0, $s9t2A.UI_ELEMENTS).FORM.INPUT_MESSAGE.addEventListener(\"submit\", (event)=>{\n    event.preventDefault();\n    const message = event.target.firstElementChild.value;\n    event.target.firstElementChild.value = \"\";\n    if (!message) {\n        alert(\"\\u041D\\u0435\\u043B\\u044C\\u044F \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u0443\\u0441\\u0442\\u043E\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435!\");\n        return;\n    }\n    (0, $77ac944da51b7354$export$465cb47180de50f0)(message);\n});\n(0, $s9t2A.UI_ELEMENTS).FORM.SETTINGS.addEventListener(\"submit\", async (event)=>{\n    event.preventDefault();\n    const name = event.target.firstElementChild.value;\n    const response = await (0, $77ac944da51b7354$export$ecce8d0c2c733c65)(name);\n    if (response.status === (0, $s9t2A.HTTP).STATUS.BAD_REQUEST) {\n        alert(\"\\u0418\\u043C\\u044F \\u0441\\u043B\\u0438\\u0448\\u043A\\u043E\\u043C \\u043A\\u043E\\u0440\\u043E\\u0442\\u043A\\u043E\\u0435! \\u041C\\u0438\\u043D\\u0438\\u043C\\u0443\\u043C \\u0434\\u0432\\u0430 \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u0430!\");\n        return;\n    }\n    // const data = await response.json();\n    // console.log(data);\n    localStorage.setItem(\"name\", name);\n    alert(\"\\u0418\\u043C\\u044F \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E \\u0438\\u0437\\u043C\\u0435\\u043D\\u0438\\u043D\\u043E!\");\n});\n(0, $s9t2A.UI_ELEMENTS).FORM.AUTHORIZATION.addEventListener(\"submit\", async (event)=>{\n    event.preventDefault();\n    const email = event.target.firstElementChild.value;\n    const response = await (0, $77ac944da51b7354$export$1cea2e25b75a88f2)(email);\n    if (response.status === (0, $s9t2A.HTTP).STATUS.BAD_REQUEST) {\n        alert(\"\\u0412\\u0432\\u0435\\u0434\\u0435\\u043D \\u043D\\u0435\\u043A\\u043E\\u0440\\u0440\\u0435\\u043A\\u0442\\u043D\\u044B\\u0439 \\u0430\\u0434\\u0440\\u0435\\u0441 \\u044D\\u043B. \\u043F\\u043E\\u0447\\u0442\\u044B!\");\n        return;\n    }\n    alert(\"\\u041D\\u0430 \\u043F\\u043E\\u0447\\u0442\\u0443 \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D \\u043A\\u043E\\u0434 \\u043F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F!\");\n    (0, $s9t2A.UI_ELEMENTS).MODAL_WINDOW.AUTHORIZATION.classList.remove(\"open\");\n    (0, $s9t2A.UI_ELEMENTS).MODAL_WINDOW.ACCEPT.classList.add(\"open\");\n});\n(0, $s9t2A.UI_ELEMENTS).FORM.ACCEPT.addEventListener(\"submit\", async (event)=>{\n    event.preventDefault();\n    const token = event.target.firstElementChild.value;\n    const response = await (0, $77ac944da51b7354$export$24d2e7dc410ce2e5)(token);\n    if (response.status === (0, $s9t2A.HTTP).STATUS.UNAUTHORIZED) {\n        alert(\"\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u044B\\u0439 \\u043A\\u043E\\u0434 \\u043F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F!\");\n        return;\n    }\n    const data = await response.json();\n    try {\n        localStorage.setItem(\"messages\", JSON.stringify(data));\n    } catch (error) {\n        console.log(error);\n    }\n    (0, (/*@__PURE__*/$parcel$interopDefault($8Nbse))).set(\"token\", token);\n    const personalInfoResponse = await (0, $77ac944da51b7354$export$53316ac66ddeb6d6)();\n    const personalInfo = await personalInfoResponse.json();\n    localStorage.setItem(\"email\", personalInfo.email);\n    localStorage.setItem(\"name\", personalInfo.name);\n    $c23a8642c134aff9$var$uploadMessageHistory();\n    (0, $77ac944da51b7354$export$d98806af32876cc6)();\n    (0, $s9t2A.UI_ELEMENTS).MODAL_WINDOW.ACCEPT.classList.remove(\"open\");\n    (0, $s9t2A.UI_ELEMENTS).BACKGROUND_MODAL_WINDOW.style.display = \"none\";\n    event.target.firstElementChild.value = \"\";\n});\nfunction $c23a8642c134aff9$export$e7d1575c30960620(name, message, date, isPersonalMessage, isSendingLive) {\n    const hoursNow = date.getHours();\n    const minutesNow = date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes(); //\n    const messageType = isPersonalMessage ? \"dialog__personal_message\" : \"dialog__someone_message\";\n    let li = document.createElement(\"li\");\n    li.append((0, $s9t2A.UI_ELEMENTS).TEMPLATE.content.cloneNode(true));\n    li.firstElementChild.textContent = `${name}: ${message}`;\n    li.lastElementChild.textContent = `${hoursNow}:${minutesNow}`;\n    li.classList.add(\"dialog__message\", \"dialog__message-box\", messageType);\n    if (isSendingLive) (0, $s9t2A.UI_ELEMENTS).MESSAGE_LIST.prepend(li);\n    else (0, $s9t2A.UI_ELEMENTS).MESSAGE_LIST.append(li);\n}\nasync function $c23a8642c134aff9$var$uploadMessageHistory() {\n    const firstIndex = localStorage.getItem(\"numberUploadedMessages\");\n    //  \n    localStorage.setItem(\"numberUploadedMessages\", Number(localStorage.getItem(\"numberUploadedMessages\")) + 19);\n    const lastIndex = localStorage.getItem(\"numberUploadedMessages\");\n    try {\n        const data = JSON.parse(localStorage.getItem(\"messages\"));\n        data.messages.forEach((item, index)=>{\n            let isValidIndex = index >= firstIndex && index < lastIndex;\n            if (isValidIndex) {\n                const dateNow = new Date(item.createdAt);\n                const email = localStorage.getItem(\"email\");\n                if (item.user.email === email) $c23a8642c134aff9$export$e7d1575c30960620(item.user.name, item.text, dateNow, true, false);\n                else $c23a8642c134aff9$export$e7d1575c30960620(item.user.name, item.text, dateNow, false, false);\n            } else return;\n        });\n    } catch (error) {\n        console.log(error);\n    }\n}\n(0, $s9t2A.UI_ELEMENTS).BUTTON.ACCEPT_CLOSE.addEventListener(\"click\", ()=>{\n    (0, $s9t2A.UI_ELEMENTS).MODAL_WINDOW.ACCEPT.classList.remove(\"open\");\n    (0, $s9t2A.UI_ELEMENTS).MODAL_WINDOW.AUTHORIZATION.classList.add(\"open\");\n});\n(0, $s9t2A.UI_ELEMENTS).BUTTON.SETTINGS_CLOSE.addEventListener(\"click\", ()=>{\n    (0, $s9t2A.UI_ELEMENTS).MODAL_WINDOW.SETTINGS.classList.remove(\"open\");\n    (0, $s9t2A.UI_ELEMENTS).BACKGROUND_MODAL_WINDOW.style.display = \"none\";\n});\n(0, $s9t2A.UI_ELEMENTS).BUTTON.AUTHORIZATION_TOKEN_BTN.addEventListener(\"click\", ()=>{\n    (0, $s9t2A.UI_ELEMENTS).MODAL_WINDOW.AUTHORIZATION.classList.remove(\"open\");\n    (0, $s9t2A.UI_ELEMENTS).MODAL_WINDOW.ACCEPT.classList.add(\"open\");\n});\nconst $c23a8642c134aff9$var$exitHandler = ()=>{\n    (0, (/*@__PURE__*/$parcel$interopDefault($8Nbse))).remove(\"token\");\n    localStorage.clear();\n    localStorage.setItem(\"numberUploadedMessages\", 0);\n    $c23a8642c134aff9$var$clearMessageHistory();\n    (0, $s9t2A.UI_ELEMENTS).MODAL_WINDOW.AUTHORIZATION.classList.add(\"open\");\n    (0, $s9t2A.UI_ELEMENTS).BACKGROUND_MODAL_WINDOW.style.display = \"block\";\n};\n(0, $s9t2A.UI_ELEMENTS).BUTTON.EXIT.addEventListener(\"click\", $c23a8642c134aff9$var$exitHandler);\nconst $c23a8642c134aff9$var$clearMessageHistory = ()=>{\n    const messages = document.querySelectorAll(\".dialog__message\");\n    if (messages) messages.forEach((item)=>item.remove());\n};\n\n\n//# sourceMappingURL=index.20be944a.js.map\n","/*! js-cookie v3.0.5 | MIT */\n;\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (function () {\n    var current = global.Cookies;\n    var exports = global.Cookies = factory();\n    exports.noConflict = function () { global.Cookies = current; return exports; };\n  })());\n})(this, (function () { 'use strict';\n\n  /* eslint-disable no-var */\n  function assign (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        target[key] = source[key];\n      }\n    }\n    return target\n  }\n  /* eslint-enable no-var */\n\n  /* eslint-disable no-var */\n  var defaultConverter = {\n    read: function (value) {\n      if (value[0] === '\"') {\n        value = value.slice(1, -1);\n      }\n      return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n    },\n    write: function (value) {\n      return encodeURIComponent(value).replace(\n        /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n        decodeURIComponent\n      )\n    }\n  };\n  /* eslint-enable no-var */\n\n  /* eslint-disable no-var */\n\n  function init (converter, defaultAttributes) {\n    function set (name, value, attributes) {\n      if (typeof document === 'undefined') {\n        return\n      }\n\n      attributes = assign({}, defaultAttributes, attributes);\n\n      if (typeof attributes.expires === 'number') {\n        attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n      }\n      if (attributes.expires) {\n        attributes.expires = attributes.expires.toUTCString();\n      }\n\n      name = encodeURIComponent(name)\n        .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n        .replace(/[()]/g, escape);\n\n      var stringifiedAttributes = '';\n      for (var attributeName in attributes) {\n        if (!attributes[attributeName]) {\n          continue\n        }\n\n        stringifiedAttributes += '; ' + attributeName;\n\n        if (attributes[attributeName] === true) {\n          continue\n        }\n\n        // Considers RFC 6265 section 5.2:\n        // ...\n        // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n        //     character:\n        // Consume the characters of the unparsed-attributes up to,\n        // not including, the first %x3B (\";\") character.\n        // ...\n        stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n      }\n\n      return (document.cookie =\n        name + '=' + converter.write(value, name) + stringifiedAttributes)\n    }\n\n    function get (name) {\n      if (typeof document === 'undefined' || (arguments.length && !name)) {\n        return\n      }\n\n      // To prevent the for loop in the first place assign an empty array\n      // in case there are no cookies at all.\n      var cookies = document.cookie ? document.cookie.split('; ') : [];\n      var jar = {};\n      for (var i = 0; i < cookies.length; i++) {\n        var parts = cookies[i].split('=');\n        var value = parts.slice(1).join('=');\n\n        try {\n          var found = decodeURIComponent(parts[0]);\n          jar[found] = converter.read(value, found);\n\n          if (name === found) {\n            break\n          }\n        } catch (e) {}\n      }\n\n      return name ? jar[name] : jar\n    }\n\n    return Object.create(\n      {\n        set,\n        get,\n        remove: function (name, attributes) {\n          set(\n            name,\n            '',\n            assign({}, attributes, {\n              expires: -1\n            })\n          );\n        },\n        withAttributes: function (attributes) {\n          return init(this.converter, assign({}, this.attributes, attributes))\n        },\n        withConverter: function (converter) {\n          return init(assign({}, this.converter, converter), this.attributes)\n        }\n      },\n      {\n        attributes: { value: Object.freeze(defaultAttributes) },\n        converter: { value: Object.freeze(converter) }\n      }\n    )\n  }\n\n  var api = init(defaultConverter, { path: '/' });\n  /* eslint-enable no-var */\n\n  return api;\n\n}));\n","export const UI_ELEMENTS = {\r\n    FORM: {\r\n        AUTHORIZATION: document.querySelector('.authorization__form'),\r\n        SETTINGS: document.querySelector('.settings__form'),\r\n        ACCEPT: document.querySelector('.accept__form'),\r\n        INPUT_MESSAGE: document.querySelector('.dialog__bottom'),\r\n    },\r\n    MODAL_WINDOW: {\r\n        AUTHORIZATION: document.querySelector('.authorization'),\r\n        SETTINGS: document.querySelector('.settings'),\r\n        ACCEPT: document.querySelector('.accept'),\r\n    },\r\n    BUTTON: {\r\n        AUTHORIZATION_TOKEN_BTN: document.querySelector('.authorization__token-btn'),\r\n        ACCEPT_CLOSE: document.querySelector('.accept__close'),\r\n        SETTINGS_CLOSE: document.querySelector('.settings__close'),\r\n        SETTINGS: document.querySelector('.dialog__btn-settings'),\r\n        EXIT: document.querySelector('.dialog__btn-exit'),\r\n    },\r\n    BACKGROUND_MODAL_WINDOW: document.querySelector('.background-modal_window'),\r\n    TEMPLATE: document.getElementById('message_submit'),\r\n    MESSAGE_LIST: document.querySelector('.dialog__message-list')\r\n}\r\n\r\nexport const URL = {\r\n    API: {\r\n        MESSAGES: 'https://edu.strada.one/api/messages',\r\n        USER: 'https://edu.strada.one/api/user',\r\n        USER_ME: 'https://edu.strada.one/api/user/me',\r\n    },\r\n    WEB_SOCKET: 'ws://edu.strada.one/websockets?',\r\n}\r\n\r\nexport const HTTP = {\r\n    STATUS: {\r\n        BAD_REQUEST: 400,\r\n        UNAUTHORIZED: 401,\r\n    },\r\n}\r\n\r\nexport const WS_READY_STATE = {\r\n    OPEN: 1,\r\n    CLOSED: 3,\r\n}","import Cookie from 'js-cookie'\r\nimport { HTTP, UI_ELEMENTS } from \"./constants\";\r\nimport { getPersonalInfo, updateName, getMessageHistory, openWebsocket, sendMessage, sendEmail } from './main';\r\n\r\ndocument.addEventListener('DOMContentLoaded', async () => {\r\n    localStorage.setItem('numberUploadedMessages', 0);\r\n\r\n    const token = Cookie.get('token');\r\n\r\n    if (token) {\r\n        const response = await getMessageHistory(token);\r\n        const data = await response.json();\r\n        try {\r\n            localStorage.setItem('messages', JSON.stringify(data));\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n\r\n        uploadMessageHistory();\r\n        openWebsocket();\r\n    } else {\r\n        UI_ELEMENTS.MODAL_WINDOW.AUTHORIZATION.classList.add('open');\r\n        UI_ELEMENTS.BACKGROUND_MODAL_WINDOW.style.display = 'block';\r\n    }\r\n})\r\n\r\nUI_ELEMENTS.MESSAGE_LIST.addEventListener('scroll', (event) => {\r\n    const containerHeight = event.currentTarget.clientHeight;\r\n    const scrollHeight = event.currentTarget.scrollHeight;\r\n    const scrollTop = event.currentTarget.scrollTop;\r\n\r\n    const isTopOfScroll = containerHeight + Math.abs(scrollTop) + 1 >= scrollHeight;\r\n    if (isTopOfScroll) {\r\n        uploadMessageHistory();\r\n    }\r\n})\r\n\r\nUI_ELEMENTS.BUTTON.SETTINGS.addEventListener('click', async () => {\r\n    UI_ELEMENTS.MODAL_WINDOW.SETTINGS.classList.add('open');\r\n    UI_ELEMENTS.BACKGROUND_MODAL_WINDOW.style.display = 'block';\r\n\r\n    UI_ELEMENTS.FORM.SETTINGS.firstElementChild.value = localStorage.getItem('name');\r\n})\r\n\r\nUI_ELEMENTS.FORM.INPUT_MESSAGE.addEventListener('submit', (event) => {\r\n    event.preventDefault();\r\n\r\n    const message = event.target.firstElementChild.value;\r\n    event.target.firstElementChild.value = '';\r\n    \r\n    if (!message) {\r\n        alert('Нелья отправить пустое сообщение!');\r\n        return;\r\n    }\r\n\r\n    sendMessage(message);\r\n})\r\n\r\n\r\nUI_ELEMENTS.FORM.SETTINGS.addEventListener('submit', async (event) => {\r\n    event.preventDefault();\r\n\r\n    const name = event.target.firstElementChild.value;\r\n\r\n    const response = await updateName(name);\r\n    if (response.status === HTTP.STATUS.BAD_REQUEST) {\r\n        alert('Имя слишком короткое! Минимум два символа!');\r\n        return;\r\n    }\r\n    // const data = await response.json();\r\n    // console.log(data);\r\n    localStorage.setItem('name', name);\r\n    alert('Имя успешно изменино!');\r\n})\r\n\r\nUI_ELEMENTS.FORM.AUTHORIZATION.addEventListener('submit', async (event) => {\r\n    event.preventDefault();\r\n\r\n    const email = event.target.firstElementChild.value;\r\n    \r\n    const response = await sendEmail(email);\r\n\r\n    if (response.status === HTTP.STATUS.BAD_REQUEST) {\r\n        alert('Введен некорректный адрес эл. почты!');\r\n        return;\r\n    }\r\n\r\n    alert('На почту отправлен код подтверждения!');\r\n\r\n    UI_ELEMENTS.MODAL_WINDOW.AUTHORIZATION.classList.remove('open');\r\n    UI_ELEMENTS.MODAL_WINDOW.ACCEPT.classList.add('open');\r\n})\r\n\r\nUI_ELEMENTS.FORM.ACCEPT.addEventListener('submit', async (event) => {\r\n    event.preventDefault();\r\n    const token = event.target.firstElementChild.value;\r\n\r\n    const response = await getMessageHistory(token);\r\n    if (response.status === HTTP.STATUS.UNAUTHORIZED) {\r\n        alert('Неверный код подтверждения!');\r\n        return;\r\n    }\r\n\r\n    const data = await response.json();\r\n    try {\r\n        localStorage.setItem('messages', JSON.stringify(data));\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n    \r\n    Cookie.set('token', token);\r\n    \r\n    const personalInfoResponse = await getPersonalInfo();\r\n    const personalInfo = await personalInfoResponse.json();\r\n    \r\n    localStorage.setItem('email', personalInfo.email);\r\n    localStorage.setItem('name', personalInfo.name);\r\n    \r\n    uploadMessageHistory();\r\n    openWebsocket();\r\n\r\n    UI_ELEMENTS.MODAL_WINDOW.ACCEPT.classList.remove('open');\r\n    UI_ELEMENTS.BACKGROUND_MODAL_WINDOW.style.display = 'none';\r\n    event.target.firstElementChild.value = '';\r\n})\r\n\r\nexport function addMessageToUI(name, message, date, isPersonalMessage, isSendingLive) {\r\n    const hoursNow = date.getHours();\r\n    const minutesNow = date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes(); //\r\n    \r\n    const messageType = isPersonalMessage ? 'dialog__personal_message' : 'dialog__someone_message';\r\n\r\n    let li = document.createElement('li');\r\n    li.append(UI_ELEMENTS.TEMPLATE.content.cloneNode(true));\r\n    li.firstElementChild.textContent = `${name}: ${message}`;\r\n    li.lastElementChild.textContent = `${hoursNow}:${minutesNow}`;\r\n    li.classList.add('dialog__message', 'dialog__message-box', messageType);\r\n\r\n    if (isSendingLive) {\r\n        UI_ELEMENTS.MESSAGE_LIST.prepend(li);\r\n    } else {\r\n        UI_ELEMENTS.MESSAGE_LIST.append(li);\r\n    }\r\n}\r\n\r\nasync function uploadMessageHistory() {\r\n    const firstIndex = localStorage.getItem('numberUploadedMessages');\r\n    //  \r\n    localStorage.setItem('numberUploadedMessages', Number(localStorage.getItem('numberUploadedMessages')) + 19);\r\n    const lastIndex = localStorage.getItem('numberUploadedMessages');\r\n\r\n    try {\r\n        const data = JSON.parse(localStorage.getItem('messages'));\r\n\r\n        data.messages.forEach((item, index) => {\r\n            let isValidIndex = (index >= firstIndex) && (index < lastIndex);\r\n    \r\n            if (isValidIndex) {\r\n                const dateNow = new Date(item.createdAt);\r\n                const email = localStorage.getItem('email');\r\n                if (item.user.email === email) {\r\n                    addMessageToUI(item.user.name, item.text, dateNow, true, false);\r\n                } else {\r\n                    addMessageToUI(item.user.name, item.text, dateNow, false, false);\r\n                }\r\n            } else {\r\n                return;\r\n            }\r\n        })\r\n    } catch(error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nUI_ELEMENTS.BUTTON.ACCEPT_CLOSE.addEventListener('click', () => {\r\n    UI_ELEMENTS.MODAL_WINDOW.ACCEPT.classList.remove('open');\r\n    UI_ELEMENTS.MODAL_WINDOW.AUTHORIZATION.classList.add('open');\r\n})\r\n\r\nUI_ELEMENTS.BUTTON.SETTINGS_CLOSE.addEventListener('click', () => {\r\n    UI_ELEMENTS.MODAL_WINDOW.SETTINGS.classList.remove('open');\r\n    UI_ELEMENTS.BACKGROUND_MODAL_WINDOW.style.display = 'none';\r\n})\r\n\r\nUI_ELEMENTS.BUTTON.AUTHORIZATION_TOKEN_BTN.addEventListener('click', () => {\r\n    UI_ELEMENTS.MODAL_WINDOW.AUTHORIZATION.classList.remove('open');\r\n    UI_ELEMENTS.MODAL_WINDOW.ACCEPT.classList.add('open');\r\n})\r\n\r\nconst exitHandler = () => {\r\n    Cookie.remove('token');\r\n    localStorage.clear();\r\n\r\n    localStorage.setItem('numberUploadedMessages', 0);\r\n    \r\n    clearMessageHistory();\r\n\r\n    UI_ELEMENTS.MODAL_WINDOW.AUTHORIZATION.classList.add('open');\r\n    UI_ELEMENTS.BACKGROUND_MODAL_WINDOW.style.display = 'block';\r\n}\r\n\r\nUI_ELEMENTS.BUTTON.EXIT.addEventListener('click', exitHandler);\r\n\r\nconst clearMessageHistory = () => {\r\n    const messages = document.querySelectorAll('.dialog__message');\r\n\r\n    if (messages) {\r\n        messages.forEach(item => item.remove());\r\n    }\r\n}","import Cookie from \"js-cookie\";\r\nimport { URL, WS_READY_STATE } from \"./constants\";\r\nimport { addMessageToUI } from \"./view\";\r\n\r\nlet socket;\r\n\r\nexport async function sendRequest(url, method, body, headers) {\r\n    const options = {\r\n        method: method,\r\n        headers: headers,\r\n    }\r\n\r\n    try {\r\n        const isNotEmptyBody = Object.keys(body).length;\r\n        if (isNotEmptyBody) {\r\n            options.body = JSON.stringify(body);\r\n        }\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n\r\n    return await fetch(url, options);\r\n}\r\n\r\nexport function updateName(name) {\r\n    const token = Cookie.get('token');\r\n\r\n    const headers = {\r\n        'Authorization': `Bearer ${token}`,\r\n        'Content-Type': 'application/json'\r\n    };\r\n\r\n    return sendRequest(URL.API.USER, 'PATCH', {name: name}, headers);\r\n}\r\n\r\nexport function sendEmail(email) {\r\n    const headers = {\r\n        'Content-Type': 'application/json'\r\n    }\r\n\r\n    return sendRequest(URL.API.USER, 'POST', {email: email}, headers);\r\n}\r\n\r\nexport function getPersonalInfo() {\r\n    const token = Cookie.get('token');\r\n\r\n    const headers = {\r\n        'Authorization': `Bearer ${token}`,\r\n        'Content-Type': 'application/json'\r\n    };\r\n\r\n    return sendRequest(URL.API.USER_ME, 'GET', {}, headers);\r\n}\r\n\r\nexport function getMessageHistory(token) {\r\n    const headers = {\r\n        'Authorization': `Bearer ${token}`,\r\n        'Content-Type': 'application/json'\r\n    };\r\n\r\n    return sendRequest(URL.API.MESSAGES, 'GET', {}, headers);\r\n}\r\n\r\nexport function handleRecevingMessages() {\r\n    socket.onmessage = function(event) {\r\n        try {\r\n            const data = JSON.parse(event.data);\r\n            const dateNow = new Date(data.createdAt);\r\n        \r\n            const email = localStorage.getItem('email');\r\n            if (data.user.email === email) {\r\n                addMessageToUI(data.user.name, data.text, dateNow, true, true);\r\n            } else {\r\n                addMessageToUI(data.user.name, data.text, dateNow, false, true);\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n}\r\n\r\nexport function openWebsocket() {\r\n    try {\r\n        const token = Cookie.get('token');\r\n        const isSocketOpen = socket?.readyState === WS_READY_STATE.OPEN;\r\n        const isSocketClose = (socket?.readyState === WS_READY_STATE.CLOSED) || !socket;\r\n\r\n        if (isSocketOpen) {\r\n            socket.close();\r\n            socket = new WebSocket(URL.WEB_SOCKET + token);\r\n            handleRecevingMessages();\r\n        } else if (isSocketClose) {\r\n            socket = new WebSocket(URL.WEB_SOCKET + token);\r\n            handleRecevingMessages();\r\n        }\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nexport function sendMessage(message) {\r\n    try {\r\n        if (socket?.readyState === 1) {\r\n            socket.send(JSON.stringify({\r\n                text: `${message}`,\r\n            }));\r\n        }\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}"],"names":["$77ac944da51b7354$var$socket","$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","$parcel$interopDefault","a","__esModule","default","$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","parcelRegister","factory","assign","target","i","arguments","length","source","key","converter","defaultAttributes","name","value","attributes","document","expires","Date","now","toUTCString","encodeURIComponent","replace","decodeURIComponent","escape","stringifiedAttributes","attributeName","split","cookie","write","create","cookies","jar","parts","slice","join","found","read","remove","withAttributes","withConverter","freeze","path","$0549f5aaef62b2d2$export$6b8c0dabfa626b4f","$0549f5aaef62b2d2$export$61abde59b50deb8e","$0549f5aaef62b2d2$export$ee9d07cf1658f1a7","$0549f5aaef62b2d2$export$2c1bf60c22d7bfeb","FORM","AUTHORIZATION","querySelector","SETTINGS","ACCEPT","INPUT_MESSAGE","MODAL_WINDOW","BUTTON","AUTHORIZATION_TOKEN_BTN","ACCEPT_CLOSE","SETTINGS_CLOSE","EXIT","BACKGROUND_MODAL_WINDOW","TEMPLATE","getElementById","MESSAGE_LIST","API","MESSAGES","USER","USER_ME","WEB_SOCKET","STATUS","BAD_REQUEST","UNAUTHORIZED","OPEN","CLOSED","$8Nbse","$s9t2A","$77ac944da51b7354$export$d5a1e65f8aa21b51","url","method","body","headers","options","isNotEmptyBody","keys","JSON","stringify","error","console","log","fetch","$77ac944da51b7354$export$24d2e7dc410ce2e5","token","URL","$77ac944da51b7354$export$43ad8e7eb817f344","onmessage","event","data","parse","dateNow","createdAt","email","localStorage","getItem","user","$c23a8642c134aff9$export$e7d1575c30960620","text","$77ac944da51b7354$export$d98806af32876cc6","isSocketOpen","readyState","WS_READY_STATE","isSocketClose","close","WebSocket","message","date","isPersonalMessage","isSendingLive","hoursNow","getHours","minutesNow","getMinutes","li","createElement","append","UI_ELEMENTS","content","cloneNode","firstElementChild","textContent","lastElementChild","classList","add","prepend","$c23a8642c134aff9$var$uploadMessageHistory","firstIndex","setItem","Number","lastIndex","messages","forEach","item","index","addEventListener","response","json","style","display","containerHeight","currentTarget","clientHeight","scrollHeight","scrollTop","Math","abs","preventDefault","alert","send","status","HTTP","personalInfoResponse","personalInfo","clear","$c23a8642c134aff9$var$clearMessageHistory","querySelectorAll"],"version":3,"file":"index.20be944a.js.map"}